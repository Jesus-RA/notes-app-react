(this["webpackJsonpnotes-app"]=this["webpackJsonpnotes-app"]||[]).push([[0],{233:function(e,t,n){},234:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),c=n(83),r=n.n(c),s=(n(88),n(4)),i=n(13),l=n.n(i),d=n(11),u=n(22),b=n(44),j=n.n(b),h=n(0),m=function(){var e=Object(u.a)(l.a.mark((function e(t,n){var a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://notes-api-app.herokuapp.com/api/v1/notes",{headers:{"Content-Type":"application/vnd.api+json"}});case 2:if((a=e.sent).ok||406===a.status){e.next=8;break}return t(!0),n(a.statusText),j.a.fire({title:a.statusText,icon:"error",toast:!0,position:"top-end",showConfirmButton:!1}),e.abrupt("return",[]);case 8:return e.next=10,a.json();case 10:if(!(null===(o=e.sent)||void 0===o?void 0:o.errors)){e.next=16;break}return t(!0),n(o.errors.detail),j.a.fire({title:o.errors.detail,icon:"error",toast:!0,timer:5e3,position:"top-end",showConfirmButton:!1}),e.abrupt("return",[]);case 16:return e.abrupt("return",o.data.map((function(e){return Object(d.a)(Object(d.a)({id:e.id},e.attributes),{},{selfLink:e.links.self})})));case 17:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),f=Object(a.createContext)();function p(e){var t=e.children,n=Object(a.useState)([]),o=Object(s.a)(n,2),c=o[0],r=o[1],i=Object(a.useState)([]),d=Object(s.a)(i,2),b=d[0],j=d[1],p=Object(a.useState)(!0),O=Object(s.a)(p,2),x=O[0],v=O[1],g=Object(a.useState)(!1),N=Object(s.a)(g,2),w=N[0],C=N[1],y=Object(a.useState)(""),k=Object(s.a)(y,2),S=k[0],F=k[1];return Object(a.useEffect)((function(){var e=!1;function t(){return(t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m(C,F);case 2:n=t.sent,e||(v(!1),r(n),j(n));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e=!0}}),[]),Object(h.jsx)(f.Provider,{value:{notes:c,setNotes:r,notesToShow:b,setNotesToShow:j,loading:x,error:w,errorMessage:S},children:t})}function O(e){var t=e.loading,n=Object(h.jsx)("div",{className:"spinner-grow loader",role:"status",children:Object(h.jsx)("span",{className:"visually-hidden",children:"Loading..."})});return Object(h.jsx)(a.Fragment,{children:t?n:""})}var x=function(e){var t=e.message,n={info:"alert-info",error:"alert-danger",success:"alert-success"}[e.alert];return Object(h.jsx)("div",{className:"alert ".concat(n," text-center col-md-8 mx-auto"),children:t})},v=n(45),g=n(30),N=n.n(g),w=n(31),C=n.n(w),y=function(e){var t=e.id,n=void 0===t?0:t,o=e.content,c=e.setContent,r=Object(a.useState)(!1),i=Object(s.a)(r,2),l=i[0],d=i[1];return Object(h.jsxs)("div",{className:"form-group mt-4",children:[Object(h.jsxs)("div",{className:"d-flex justify-content-between mb-2",children:[Object(h.jsx)("label",{htmlFor:"editNoteContent".concat(n),children:"Note content:"}),Object(h.jsxs)("div",{className:"form-check form-switch",children:[Object(h.jsx)("input",{className:"form-check-input",type:"checkbox",id:"previewMarkdownSwitch",value:l,onChange:function(){return d(!l)}}),Object(h.jsx)("label",{className:"form-check-label",for:"previewMarkdownSwitch",children:"Preview"})]})]}),l?Object(h.jsx)(N.a,{remarkPlugins:[C.a],children:o}):Object(h.jsx)("textarea",{name:"content",id:"editNoteContent".concat(n),rows:"10",className:"form-control bg-transparent shadow-none",placeholder:"Note content...",value:o,onChange:function(e){return c(e.target.value)}})]})},k=(n(20),n(7)),S=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(""),r=Object(s.a)(c,2),i=r[0],l=r[1],u=Object(a.useRef)(null),b=Object(a.useContext)(f),j=b.notes,m=b.setNotes,p=b.setNotesToShow;Object(a.useEffect)((function(){return u.current.focus()}),[]);return Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)("button",{type:"button",className:"btn btn-purple col-4 col-md-3","data-bs-toggle":"modal","data-bs-target":"#addNote",children:"Add new note"}),Object(h.jsx)("div",{className:"modal fade",id:"addNote","aria-labelledby":"AddNotemodal","aria-hidden":"true",children:Object(h.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsx)("div",{className:"modal-header justify-content-end p-3 border-0",children:Object(h.jsx)("button",{className:"btn btn-danger btn-sm","data-bs-toggle":"modal","data-bs-target":"#addNote",children:"x"})}),Object(h.jsxs)("div",{className:"modal-body",children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"title",children:"Note title:"}),Object(h.jsx)("input",{type:"text",name:"title",id:"title",placeholder:"Note title",className:"form-control bg-transparent shadow-none",ref:u,value:n,onChange:function(e){return o(e.target.value)}})]}),Object(h.jsx)(y,{content:i,setContent:l})]}),Object(h.jsx)("div",{className:"modal-footer border-0",children:Object(h.jsx)("button",{type:"button",className:"btn btn-purple w-100","data-bs-toggle":"modal","data-bs-target":"#addNote",onClick:function(){var e={data:{type:"notes",attributes:{title:n,content:i}}};fetch("https://notes-api-app.herokuapp.com/api/v1/notes",{method:"POST",headers:{"Content-Type":"application/vnd.api+json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){var t=Object(d.a)(Object(d.a)({id:e.data.id},e.data.attributes),{},{selfLink:e.data.links.self});m([].concat(Object(v.a)(j),[t])),p([].concat(Object(v.a)(j),[t])),o(""),l(""),k.a.fire({title:"Note added",icon:"success",toast:!0,timer:5e3,position:"top-end",showConfirmButton:!1})})).catch(console.error)},children:"Add note"})})]})})})]})},F=function(){var e=Object(a.useContext)(f),t=e.notes,n=e.notesToShow,o=e.setNotesToShow;return Object(h.jsx)("div",{className:"form-group col-6 offset-2 col-md-6 offset-md-3",children:Object(h.jsx)("input",{type:"text",name:"search",placeholder:"Search by title...",className:"form-control bg-transparent shadow-none border-purple",onChange:function(e){return function(e){var a=e.target.value,c=n.filter((function(e){return e.title.toLowerCase().includes(a.toLowerCase())}));c.length||k.a.fire({title:"No results founded",icon:"info",toast:!0,timer:3e3,position:"top-end",showConfirmButton:!1}),0===a.length?o(t):o(c)}(e)}})})},T=function(e){var t=e.note,n=t.id,o=t.title,c=t.content,r=t.selfLink,i=Object(a.useState)(o),l=Object(s.a)(i,2),u=l[0],b=l[1],j=Object(a.useState)(c),m=Object(s.a)(j,2),p=m[0],O=m[1],x=Object(a.useRef)(null),v=Object(a.useContext)(f),g=v.notes,N=v.setNotesToShow;Object(a.useEffect)((function(){x.current.focus()}),[]);return Object(h.jsxs)(a.Fragment,{children:[Object(h.jsx)("button",{type:"button",className:"btn btn-warning btn-sm","data-bs-toggle":"modal","data-bs-target":"#editNote".concat(n),children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-pencil-square",viewBox:"0 0 16 16",children:[Object(h.jsx)("path",{d:"M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"}),Object(h.jsx)("path",{"fill-rule":"evenodd",d:"M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z"})]})}),Object(h.jsx)("div",{className:"modal fade",id:"editNote".concat(n),"aria-labelledby":"AddNotemodal","aria-hidden":"true",children:Object(h.jsx)("div",{className:"modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg",children:Object(h.jsxs)("div",{className:"modal-content",children:[Object(h.jsx)("div",{className:"modal-header justify-content-end p-3 border-0",children:Object(h.jsx)("button",{className:"btn btn-danger btn-sm","data-bs-toggle":"modal","data-bs-target":"#editNote".concat(n),children:"x"})}),Object(h.jsxs)("div",{className:"modal-body",children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsx)("label",{htmlFor:"editNoteTitle",className:"mb-2",children:"Note title:"}),Object(h.jsx)("input",{type:"text",name:"title",id:"editNoteTitle".concat(n),placeholder:"Note title",className:"form-control bg-transparent shadow-none",ref:x,value:u,onChange:function(e){return b(e.target.value)}})]}),Object(h.jsx)(y,{content:p,setContent:O})]}),Object(h.jsx)("div",{className:"modal-footer border-0",children:Object(h.jsx)("button",{type:"button",className:"btn btn-purple w-100","data-bs-toggle":"modal","data-bs-target":"#editNote".concat(n),onClick:function(){var e={data:{type:"notes",id:n,attributes:{title:u,content:p}}};fetch(r,{method:"PATCH",headers:{"Content-Type":"application/vnd.api+json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){var t=Object(d.a)(Object(d.a)({id:n},e.data.attributes),{},{selfLink:e.data.links.self}),a=g.map((function(e){return e.id===t.id?t:e}));N(a),k.a.fire({title:"Note updated",icon:"success",toast:!0,timer:5e3,position:"top-end",showConfirmButton:!1})})).catch((function(e){return console.error(e)}))},children:"Save changes"})})]})})})]})},M=n(43),B=n.n(M),L=function(e){var t=e.note,n=t.id,o=t.title,c=t.content,r=t.created_at,s=Object(a.useContext)(f),i=s.notes,d=s.setNotes,b=s.setNotesToShow,j=function(){k.a.fire({title:"Are you sure you want to delete this note?",icon:"warning",iconColor:"343A40",showCancelButton:!0,cancelButtonColor:"#d33",confirmButtonColor:"#8412FF",confirmButtonText:"Yes, delete it!",showLoaderOnConfirm:!0,preConfirm:function(){return function(e){var t=i.find((function(t){return t.id===e})).selfLink;fetch(t,{method:"DELETE",headers:{"Content-Type":"application/vnd.api+json"}}).then((function(e){if(!e.ok)throw e.json()})).then((function(){var t=i.filter((function(t){return t.id!==e}));b(t),d(t)})).catch(function(){var e=Object(u.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:n=e.sent,k.a.fire({title:n.errors.detail,icon:"error",toast:!0,position:"top-end",showConfirmButton:!1});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(n)},allowOutsideClick:function(){return!k.a.isLoading()}}).then((function(e){e.isConfirmed&&k.a.fire({title:"Deleted!",text:"You note has been deleted",icon:"success",confirmButtonColor:"#8412FF"})}))};return Object(h.jsxs)("div",{className:"card shadow border-0",children:[Object(h.jsx)("div",{className:"card-header",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("span",{className:"col-8 col-md-7 col-lg-9",children:B()(r).format("MMM DD, YYYY hh:mm A")}),Object(h.jsx)("div",{className:"col-4 col-md-5 col-lg-3 p-0",children:Object(h.jsxs)("div",{className:"d-flex justify-content-around p-0",children:[Object(h.jsx)(T,{note:t}),Object(h.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return j()},children:Object(h.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",className:"bi bi-trash",viewBox:"0 0 16 16",children:[Object(h.jsx)("path",{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"}),Object(h.jsx)("path",{"fill-rule":"evenodd",d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"})]})})]})})]})}),Object(h.jsxs)("div",{className:"card-body rounded shadow-sm",children:[Object(h.jsxs)("h3",{className:"text-center",children:["Title: ",o]}),Object(h.jsx)(N.a,{remarkPlugins:[C.a],children:c})]})]})},A=function(){var e=Object(a.useContext)(f).notesToShow;return Object(h.jsx)(a.Fragment,{children:e.map((function(e){return Object(h.jsx)("div",{className:"col-md-4 mb-4",children:Object(h.jsx)(L,{note:e})},e.id)}))})},P=function(){var e=!1;window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&(e=!0);var t=Object(a.useState)(e),n=Object(s.a)(t,2),o=n[0],c=n[1];return Object(a.useEffect)((function(){!function(){var e=document.querySelector(":root").style;o?(e.setProperty("--dark","#161B22"),e.setProperty("--light","#FCFAF8"),e.setProperty("--card-background","#343A40")):(e.setProperty("--dark","#FCFAF8"),e.setProperty("--light","#161B22"),e.setProperty("--card-background","#FCFAF8"))}()}),[o]),Object(h.jsxs)("div",{className:"form-check form-switch d-flex justify-content-end mb-4",children:[Object(h.jsx)("input",{className:"form-check-input mx-3",type:"checkbox",id:"previewMarkdownSwitch",checked:o,onChange:function(){return c(!o)}}),Object(h.jsx)("label",{className:"form-check-label ".concat(o?"text-white":""),for:"previewMarkdownSwitch",children:"Dark Mode"})]})},z=function(){var e=Object(a.useContext)(f),t=e.notes,n=e.loading,o=e.error,c=e.errorMessage;return Object(h.jsxs)("div",{className:"container py-5 ".concat(n||o||!t.length?"vh-100":""),children:[Object(h.jsx)("h1",{className:"text-center app-title",children:"Manage your notes and write them using Markdown"}),Object(h.jsx)(P,{}),Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)(S,{}),Object(h.jsx)(F,{})]}),Object(h.jsxs)("div",{className:"row mt-4 ".concat(n||o||!t.length?"h-50 align-items-center justify-content-center":""),children:[!n&&o&&Object(h.jsx)(x,{message:c,alert:"error"}),Object(h.jsx)(O,{loading:n}),!n&&!o&&!t.length&&Object(h.jsx)(x,{message:"You don't have notes yet, create the first one.",alert:"info"}),!n&&Object(h.jsx)(A,{})]})]})};n(233);var E=function(){return Object(h.jsx)(p,{children:Object(h.jsx)(z,{})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,235)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),o(e),c(e),r(e)}))};r.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(E,{})}),document.getElementById("root")),V()},88:function(e,t,n){}},[[234,1,2]]]);
//# sourceMappingURL=main.3c2f0508.chunk.js.map